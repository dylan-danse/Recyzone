{% extends 'base.html.twig' %}

{% block body %}

    <div class="row">
        <h1>Vos données</h1>
        <br>
        <p>{{ user.lastName }} {{ user.firstName }} ({{ user.email }})</p>
        <p>{{ user.houseNumber }} {{ user.streetName }} - {{ user.postCode }} {{ user.city }}</p>
        <p>Composition de ménage : {{ user.numberOfAdult }} adultes - {{ user.numberOfChild }} enfants</p>
        <p>Coefficient de correction : {{ user.correctionCoeff }}%</p>
    </div>

    <br>
    <hr>
    <br>

    <div class="row">
        <h1>Vos quotas actuels</h1>
        <br>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Type de déchet</th>
                <th class="text-center">Volume déposé</th>
                <th class="text-center">Volume autorisé</th>
                <th class="text-center">Reste</th>
            </tr>
            </thead>
            <tbody>
            {% for quota in quotas  %}
                <tr>
                    <td>{{ quota['type'] }}</td>
                    {% if quota['deposed'] == null %}
                        <td class="text-center">0 m3</td>
                    {% else %}
                        <td class="text-center">{{ quota['deposed'] }} m3</td>
                    {% endif %}

                    {% if quota['total'] == 0 %}
                        <td class="text-center">/</td>
                        <td class="text-center">/</td>
                    {% else %}
                        <td class="text-center">{{ quota['total'] }} m3</td>
                        <td class="text-center">{% set remaining = quota['total'] - quota['deposed'] %}{{ remaining }} m3</td>
                    {% endif %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}
