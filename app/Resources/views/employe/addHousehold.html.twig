{% extends 'base.html.twig' %}

{% block body %}

<h1 class="text-center">Ajouter un m√©nage</h1>
    <br>

        {{ form_start(form, {'method': 'POST', 'attr': {'class': 'form-horizontal'}}) }}

        <div class="form-group">
            {{ form_label(form.firstname,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-10">
                {{ form_widget(form.firstname, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.firstname) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.lastName,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-10">
                {{ form_widget(form.lastName, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.lastName) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.email,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-10">
                {{ form_widget(form.email, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.email) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.numberOfAdult,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-4">
                {{ form_widget(form.numberOfAdult, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.numberOfAdult) }}
            </div>

            {{ form_label(form.numberOfChild,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-4">
                {{ form_widget(form.numberOfChild, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.numberOfChild) }}
            </div>
        </div>

    <hr>

        <div class="form-group">
            {{ form_label(form.commune,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-10">
                {{ form_widget(form.commune, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.commune) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.city,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-10">
                {{ form_widget(form.city, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.city) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.streetName,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-10">
                {{ form_widget(form.streetName, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.streetName) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.houseNumber,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-4">
                {{ form_widget(form.houseNumber, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.houseNumber) }}
            </div>

            {{ form_label(form.houseBox,null, { 'label_attr': {'class': 'col-sm-2 control-label'} }) }}
            <div class="col-sm-4">
                {{ form_widget(form.houseBox, { 'attr': {'class': 'form-control'} }) }}
                {{ form_errors(form.houseBox) }}
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                {{ form_widget(form.save, { 'attr': {'class': 'btn btn-default pull-right'} }) }}
            </div>
        </div>

    {{ form_end(form) }}

<script>
    $(document).ready(function() {
        loadSelectOptions();
    });

    $("#form_commune").change(function() {
        loadSelectOptions();
    });

    String.prototype.capitalize = function() {
        return this.charAt(0).toUpperCase() + this.slice(1);
    }

    function loadSelectOptions(){
        $('#form_city').prop('disabled', true);
        var selectedCommune = $("#form_commune" ).val();
        $('optgroup').each(function(index,content){
            if(content.label === selectedCommune){
                $("optgroup[label='" + content.label + "']").show();
            } else {
                $("optgroup[label='" + content.label + "']").hide();

            }
        });
        $('#form_city').prop('disabled', false);
    }

</script>

<style>
    label.required:before {
        content: "* ";
    }
</style>

{% endblock %}
